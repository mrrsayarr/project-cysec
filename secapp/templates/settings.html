{% extends "base.html" %}

{% block title %}
Settings
{% endblock %}

{% block content %}

<!-- Chart Start -->
<div class="container-fluid pt-4 px-4">
    <button type="button" class="btn btn-primary" id="run-script-button">Scripti Çalıştır</button>
    <button type="button" class="btn btn-primary" id="stop-script-button">Scripti Durdur</button>

    <input type="text" id="script-status" class="form-control p-1 mt-2" readonly>
    
    <script>
        document.getElementById('run-script-button').addEventListener('click', function () {
            fetch('/run_script/')
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    document.getElementById('script-status').value = data.status;
                });
        });

        document.getElementById('stop-script-button').addEventListener('click', function () {
            fetch('/stop_script/')
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    document.getElementById('script-status').value = data.status;
                });
        });
    </script>
    <!-- <div class="col m-2 p-2">
        <button type="button" class="btn btn-danger" onclick="toggleButton(this)">
            <span class="button-icon">Button 2</span>
            <i class="fas fa-times-circle"></i>
        </button>
        <p class="mt-1">This button does something.</p>
    </div>
    <div class="col m-2 p-2">
        <button type="button" class="btn btn-danger" onclick="toggleButton(this)">
            <span class="button-icon">Button 3</span>
            <i class="fas fa-times-circle"></i>
        </button>
        <p class="mt-1">This button does something.</p>
    </div>
    <div class="col m-2 p-2">
        <button type="button" class="btn btn-danger" onclick="toggleButton(this)">
            <span class="button-icon">Button 4</span>
            <i class="fas fa-times-circle"></i>
        </button>
        <p class="mt-1">This button does something.</p>
    </div> -->
</div>
<!-- Chart End -->

<script>
    // local storage for changing button color
    window.onload = function () {
        var buttons = document.querySelectorAll('.btn');
        buttons.forEach(function (button, index) {
            var isActive = localStorage.getItem('button' + index);
            if (isActive === 'true') {
                button.classList.remove('btn-danger');
                button.classList.add('btn-success');
                button.querySelector('i').classList.remove('fa-times-circle');
                button.querySelector('i').classList.add('fa-check-circle');
            }
        });
    }
</script>

{% endblock %}